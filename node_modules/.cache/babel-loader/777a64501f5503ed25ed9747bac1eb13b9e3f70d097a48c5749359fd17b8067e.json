{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'./AuthContext';// Assuming useAuth hook manages auth state\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[projects,setProjects]=useState([]);const[newProjectName,setNewProjectName]=useState('');const{token}=useAuth();// Assuming useAuth provides the authenticated user's token\nuseEffect(()=>{const fetchProjects=async()=>{try{const response=await fetch('https://projectfinancetracker-backend-2f2604a2f7f0.herokuapp.com/projects',{headers:{'Authorization':\"Bearer \".concat(token)// Assuming token is a Bearer token\n}});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setProjects(data);}catch(error){console.error(\"Failed to fetch projects:\",error);}};fetchProjects();},[token]);const createProject=async event=>{event.preventDefault();try{const response=await fetch('https://projectfinancetracker-backend-2f2604a2f7f0.herokuapp.com/projects',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({name:newProjectName})});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const addedProject=await response.json();setProjects([...projects,addedProject]);// Add the newly created project to the list\n}catch(error){console.error(\"Failed to create project:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Projects\"}),projects.length>0?projects.map(project=>/*#__PURE__*/_jsx(\"div\",{children:project.name},project._id)):/*#__PURE__*/_jsx(\"p\",{children:\"No projects found. Please create one.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:createProject,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newProjectName,onChange:e=>setNewProjectName(e.target.value),placeholder:\"Project Name\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create Project\"})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","jsx","_jsx","jsxs","_jsxs","Dashboard","projects","setProjects","newProjectName","setNewProjectName","token","fetchProjects","response","fetch","headers","concat","ok","Error","status","data","json","error","console","createProject","event","preventDefault","method","body","JSON","stringify","name","addedProject","children","length","map","project","_id","onSubmit","type","value","onChange","e","target","placeholder","required"],"sources":["C:/pft/project-finance-tracker-frontend/src/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext'; // Assuming useAuth hook manages auth state\r\n\r\nfunction Dashboard() {\r\n  const [projects, setProjects] = useState([]);\r\n  const [newProjectName, setNewProjectName] = useState('');\r\n  const { token } = useAuth(); // Assuming useAuth provides the authenticated user's token\r\n\r\n  useEffect(() => {\r\n    const fetchProjects = async () => {\r\n      try {\r\n        const response = await fetch('https://projectfinancetracker-backend-2f2604a2f7f0.herokuapp.com/projects', {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}` // Assuming token is a Bearer token\r\n          }\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        setProjects(data);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch projects:\", error);\r\n      }\r\n    };\r\n\r\n    fetchProjects();\r\n  }, [token]);\r\n\r\n  const createProject = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const response = await fetch('https://projectfinancetracker-backend-2f2604a2f7f0.herokuapp.com/projects', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ name: newProjectName })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const addedProject = await response.json();\r\n      setProjects([...projects, addedProject]); // Add the newly created project to the list\r\n    } catch (error) {\r\n      console.error(\"Failed to create project:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>My Projects</h1>\r\n      {projects.length > 0 ? (\r\n        projects.map(project => (\r\n          <div key={project._id}>{project.name}</div>\r\n        ))\r\n      ) : (\r\n        <p>No projects found. Please create one.</p>\r\n      )}\r\n      <form onSubmit={createProject}>\r\n        <input \r\n          type=\"text\" \r\n          value={newProjectName} \r\n          onChange={(e) => setNewProjectName(e.target.value)} \r\n          placeholder=\"Project Name\" \r\n          required\r\n        />\r\n        <button type=\"submit\">Create Project</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}